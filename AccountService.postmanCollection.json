{
  "info": {
    "_postman_id": "2f18c254-7747-40b7-a45e-74c5e723c48c",
    "name": "Account Service - CRUD (Full Payloads)",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
    "description": "Colecci√≥n con payloads completos para POST y PUT de los 3 tipos de cuenta."
  },
  "variable": [
    {
      "key": "baseUrl",
      "value": "http://localhost:8085",
      "type": "string"
    },
    {
      "key": "accSavingsId",
      "value": "",
      "type": "string"
    },
    {
      "key": "accCheckingId",
      "value": "",
      "type": "string"
    },
    {
      "key": "accFixedTermId",
      "value": "",
      "type": "string"
    }
  ],
  "item": [
    {
      "name": "Create (POST) - Full Payloads",
      "item": [
        {
          "name": "POST Create Account (SAVINGS) - Full",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/accounts",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "accounts"
              ]
            },
            "body": {
              "mode": "raw",
              "raw": "{\n  \"accountNumber\": \"12345678901\",\n  \"interbankNumber\": \"12345678901234567890\",\n  \"holderDocument\": \"DOC123456\",\n  \"authorizedSigners\": [\n    \"DOC654321\",\n    \"DOC789012\"\n  ],\n  \"accountType\": \"SAVINGS\",\n  \"balance\": 2500.5,\n  \"interestRate\": 0.4,\n  \"monthlyMovementLimit\": 10,\n  \"maintenanceFee\": null,\n  \"allowedDayOfMonth\": null,\n  \"creationDate\": \"2024-01-15T00:00:00Z\",\n  \"active\": true,\n  \"linkedCard\": {\n    \"id\": \"card001\"\n  }\n}"
            },
            "description": "Crea cuenta de ahorro con todos los campos del ejemplo."
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status 201 Created', function () {",
                  "  pm.response.to.have.status(201);",
                  "});",
                  "var body = {}; try { body = pm.response.json(); } catch (e) {}",
                  "var id = body.id || body._id;",
                  "if (id) { pm.collectionVariables.set('accSavingsId', id); }",
                  "pm.test('accountType is SAVINGS', function() {",
                  "  pm.expect(body.accountType).to.eql('SAVINGS');",
                  "});",
                  "pm.test('Required fields present', function () {",
                  "  ['accountNumber','interbankNumber','holderDocument','accountType','balance','interestRate','creationDate','active'].forEach(function(k){",
                  "    pm.expect(body).to.have.property(k);",
                  "  });",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "POST Create Account (CHECKING) - Full",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/accounts",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "accounts"
              ]
            },
            "body": {
              "mode": "raw",
              "raw": "{\n  \"accountNumber\": \"23456789012\",\n  \"interbankNumber\": \"23456789012345678901\",\n  \"holderDocument\": \"DOC987654\",\n  \"authorizedSigners\": [\n    \"DOC456789\"\n  ],\n  \"accountType\": \"CHECKING\",\n  \"balance\": 5000.0,\n  \"interestRate\": 0.2,\n  \"monthlyMovementLimit\": null,\n  \"maintenanceFee\": 15.5,\n  \"allowedDayOfMonth\": null,\n  \"creationDate\": \"2024-03-20T00:00:00Z\",\n  \"active\": true,\n  \"linkedCard\": {\n    \"id\": \"card002\"\n  }\n}"
            },
            "description": "Crea cuenta corriente con todos los campos del ejemplo."
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status 201 Created', function () {",
                  "  pm.response.to.have.status(201);",
                  "});",
                  "var body = {}; try { body = pm.response.json(); } catch (e) {}",
                  "var id = body.id || body._id;",
                  "if (id) { pm.collectionVariables.set('accCheckingId', id); }",
                  "pm.test('accountType is CHECKING', function() {",
                  "  pm.expect(body.accountType).to.eql('CHECKING');",
                  "});",
                  "pm.test('Required fields present', function () {",
                  "  ['accountNumber','interbankNumber','holderDocument','accountType','balance','interestRate','creationDate','active'].forEach(function(k){",
                  "    pm.expect(body).to.have.property(k);",
                  "  });",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "POST Create Account (FIXED_TERM) - Full",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/accounts",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "accounts"
              ]
            },
            "body": {
              "mode": "raw",
              "raw": "{\n  \"accountNumber\": \"34567890123\",\n  \"interbankNumber\": \"34567890123456789012\",\n  \"holderDocument\": \"DOC112233\",\n  \"authorizedSigners\": [],\n  \"accountType\": \"FIXED_TERM\",\n  \"balance\": 10000.0,\n  \"interestRate\": 1.2,\n  \"monthlyMovementLimit\": null,\n  \"maintenanceFee\": null,\n  \"allowedDayOfMonth\": 15,\n  \"creationDate\": \"2024-06-10T00:00:00Z\",\n  \"active\": false,\n  \"linkedCard\": {\n    \"id\": \"card003\"\n  }\n}"
            },
            "description": "Crea cuenta a plazo fijo con todos los campos del ejemplo."
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status 201 Created', function () {",
                  "  pm.response.to.have.status(201);",
                  "});",
                  "var body = {}; try { body = pm.response.json(); } catch (e) {}",
                  "var id = body.id || body._id;",
                  "if (id) { pm.collectionVariables.set('accFixedTermId', id); }",
                  "pm.test('accountType is FIXED_TERM', function() {",
                  "  pm.expect(body.accountType).to.eql('FIXED_TERM');",
                  "});",
                  "pm.test('Required fields present', function () {",
                  "  ['accountNumber','interbankNumber','holderDocument','accountType','balance','interestRate','creationDate','active'].forEach(function(k){",
                  "    pm.expect(body).to.have.property(k);",
                  "  });",
                  "});"
                ]
              }
            }
          ]
        }
      ]
    },
    {
      "name": "Update (PUT) - Full Payloads",
      "item": [
        {
          "name": "PUT Update Account (SAVINGS) - Full",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/accounts/{{accSavingsId}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "accounts",
                "{{accSavingsId}}"
              ]
            },
            "body": {
              "mode": "raw",
              "raw": "{\n  \"accountNumber\": \"12345678901\",\n  \"interbankNumber\": \"12345678901234567890\",\n  \"holderDocument\": \"DOC123456\",\n  \"authorizedSigners\": [\n    \"DOC654321\",\n    \"DOC789012\",\n    \"DOC000111\"\n  ],\n  \"accountType\": \"SAVINGS\",\n  \"balance\": 2600.75,\n  \"interestRate\": 0.45,\n  \"monthlyMovementLimit\": 12,\n  \"maintenanceFee\": null,\n  \"allowedDayOfMonth\": null,\n  \"creationDate\": \"2024-01-15T00:00:00Z\",\n  \"active\": true,\n  \"linkedCard\": {\n    \"id\": \"card001\"\n  }\n}"
            },
            "description": "Actualiza todos los campos de la cuenta de ahorro creada (requiere accSavingsId)."
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status 200 OK or 204 No Content', function () {",
                  "  pm.expect([200,204]).to.include(pm.response.code);",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "PUT Update Account (CHECKING) - Full",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/accounts/{{accCheckingId}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "accounts",
                "{{accCheckingId}}"
              ]
            },
            "body": {
              "mode": "raw",
              "raw": "{\n  \"accountNumber\": \"23456789012\",\n  \"interbankNumber\": \"23456789012345678901\",\n  \"holderDocument\": \"DOC987654\",\n  \"authorizedSigners\": [\n    \"DOC456789\",\n    \"DOC222333\"\n  ],\n  \"accountType\": \"CHECKING\",\n  \"balance\": 5200.0,\n  \"interestRate\": 0.25,\n  \"monthlyMovementLimit\": null,\n  \"maintenanceFee\": 12.0,\n  \"allowedDayOfMonth\": null,\n  \"creationDate\": \"2024-03-20T00:00:00Z\",\n  \"active\": true,\n  \"linkedCard\": {\n    \"id\": \"card002\"\n  }\n}"
            },
            "description": "Actualiza todos los campos de la cuenta corriente creada (requiere accCheckingId)."
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status 200 OK or 204 No Content', function () {",
                  "  pm.expect([200,204]).to.include(pm.response.code);",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "PUT Update Account (FIXED_TERM) - Full",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/accounts/{{accFixedTermId}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "accounts",
                "{{accFixedTermId}}"
              ]
            },
            "body": {
              "mode": "raw",
              "raw": "{\n  \"accountNumber\": \"34567890123\",\n  \"interbankNumber\": \"34567890123456789012\",\n  \"holderDocument\": \"DOC112233\",\n  \"authorizedSigners\": [],\n  \"accountType\": \"FIXED_TERM\",\n  \"balance\": 9800.0,\n  \"interestRate\": 1.25,\n  \"monthlyMovementLimit\": null,\n  \"maintenanceFee\": null,\n  \"allowedDayOfMonth\": 20,\n  \"creationDate\": \"2024-06-10T00:00:00Z\",\n  \"active\": true,\n  \"linkedCard\": {\n    \"id\": \"card003\"\n  }\n}"
            },
            "description": "Actualiza todos los campos de la cuenta a plazo fijo creada (requiere accFixedTermId)."
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status 200 OK or 204 No Content', function () {",
                  "  pm.expect([200,204]).to.include(pm.response.code);",
                  "});"
                ]
              }
            }
          ]
        }
      ]
    },
    {
      "name": "Get (GET) - Helpers",
      "item": [
        {
          "name": "GET Account (SAVINGS) by id",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/accounts/{{accSavingsId}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "accounts",
                "{{accSavingsId}}"
              ]
            },
            "description": "Obtiene la cuenta de ahorro creada."
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status 200 OK', function () { pm.response.to.have.status(200); });",
                  "var b = pm.response.json(); pm.expect(b.accountType).to.eql('SAVINGS');"
                ]
              }
            }
          ]
        },
        {
          "name": "GET Account (CHECKING) by id",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/accounts/{{accCheckingId}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "accounts",
                "{{accCheckingId}}"
              ]
            },
            "description": "Obtiene la cuenta corriente creada."
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status 200 OK', function () { pm.response.to.have.status(200); });",
                  "var b = pm.response.json(); pm.expect(b.accountType).to.eql('CHECKING');"
                ]
              }
            }
          ]
        },
        {
          "name": "GET Account (FIXED_TERM) by id",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/accounts/{{accFixedTermId}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "accounts",
                "{{accFixedTermId}}"
              ]
            },
            "description": "Obtiene la cuenta a plazo fijo creada."
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status 200 OK', function () { pm.response.to.have.status(200); });",
                  "var b = pm.response.json(); pm.expect(b.accountType).to.eql('FIXED_TERM');"
                ]
              }
            }
          ]
        }
      ]
    }
  ]
}